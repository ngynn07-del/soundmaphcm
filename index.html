<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UrbanSymphony üéß</title>
  <style>
    body {
      margin: 0;
      background-color: #ffffff;
    }

    .map-container {
      position: relative;
      width: 100%;
      max-width: 1710px;
      margin: auto;
    }

    .map {
      width: 100%;
      height: auto;
      display: block;
    }

    .icon {
      position: absolute;
      width: 100px;
      height: 90px;
      transform: translate(-50%, -50%);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    /* Hi·ªáu ·ª©ng ph·ªìng khi click */
    .icon.clicked {
      animation: pop 0.8s ease;
    }

    @keyframes pop {
      0% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -50%) scale(1.3); }
      100% { transform: translate(-50%, -50%) scale(1); }
    }

    /* Popup th√¥ng tin */
    .info-box {
      position: absolute;
      max-width: 300px;
      background: rgba(255,255,255,0.95);
      color: #333;
      padding: 12px 16px;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
      font-family: sans-serif;
      font-size: 14px;
      line-height: 1.5;
      display: none;
      z-index: 10;
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .info-box img {
      width: 100%;
      height: auto;
      border-radius: 8px;
      margin-bottom: 8px;
       }

    .info-box strong {
      font-size: 15px;
      color: #111;
      display: block;
      margin-bottom: 5px;
    }

    .info-box::after {
      content: '';
      position: absolute;
      width: 0;
      height: 0;
      border-style: solid;
    }

    .info-box.right::after {
      left: -10px;
      top: 20px;
      border-width: 8px 10px 8px 0;
      border-color: transparent white transparent transparent;
    }

    .info-box.left::after {
      right: -10px;
      top: 20px;
      border-width: 8px 0 8px 10px;
      border-color: transparent transparent transparent white;
    }

    /* Ph√°o hoa mini */
    .spark {
      position: absolute;
      width: 6px;
      height: 6px;
      background: yellow;
      border-radius: 50%;
      pointer-events: none;
      animation: spark 0.6s ease-out forwards;
    }

    @keyframes spark {
      0% { transform: scale(1); opacity: 1; }
      100% { transform: scale(2.5) translateY(-20px); opacity: 0; }
    }
  </style>
</head>
<body>
  <div class="map-container">
    <img src="map.png" alt="Sound Map" class="map">

    <!-- Nh√† th·ªù ƒê·ª©c B√† -->
    <img src="icon1.png" class="icon" id="icon1" style="top: 50%; left: 54%;"
      data-title="Saigon Notre Dame Cathedral"
      data-desc="Built in 1877, is a symbol of Saigon with classic French architecture and two bell towers over 57m high. In front of the church there are always flocks of doves flying, the bells ringing together with the sounds of the city create a peaceful atmosphere in the middle of the bustling center."
      data-img="church.jpg"
      data-sound="sound1.m4a">

    <!-- Ga Metro -->
    <img src="icon2.png" class="icon" id="icon2" style="top: 70%; left: 40%;"
      data-title="Ben Thanh Metro Station"
      data-desc="The center of Metro Line 1, built in 2012. Located right in the heart of Saigon, the station is more than 30m underground and is a symbol of the modern, dynamic life of the city."
      data-img="metro.jpg"
      data-sound="sound2.m4a">

    <!-- ƒê√†i phun n∆∞·ªõc Nguy·ªÖn Hu·ªá -->
    <img src="icon3.png" class="icon" id="icon3" style="top:59%; left: 64%;"
      data-title="Nguyen Hue Fountain"
      data-desc="Located right in the center of Nguyen Hue walking street, built in 2015 when this street was renovated into Saigon's first walking street. This is a famous check-in spot, in the evening there is water music combined with extremely chill lighting, attracting many people and tourists."
      data-img="fountain.jpg"
      data-sound="sound3.m4a">

    <!-- Popup -->
    <div class="info-box" id="infoBox"></div>
  </div>

  <script>
    const icons = document.querySelectorAll('.icon');
    const infoBox = document.getElementById('infoBox');
    let currentAudio = null;

    icons.forEach(icon => {
      icon.addEventListener('click', (e) => {
        // Hi·ªáu ·ª©ng icon ph·ªìng
        icon.classList.add('clicked');
        setTimeout(() => icon.classList.remove('clicked'), 300);

        // Hi·ªáu ·ª©ng ph√°o hoa nh·ªè
        for (let i = 0; i < 5; i++) {
          const spark = document.createElement('div');
          spark.className = 'spark';
          spark.style.left = (e.pageX + Math.random() * 20 - 10) + 'px';
          spark.style.top = (e.pageY + Math.random() * 20 - 10) + 'px';
          spark.style.background = `hsl(${Math.random() * 360}, 100%, 70%)`;
          document.body.appendChild(spark);
          setTimeout(() => spark.remove(), 600);
        }

        const rect = icon.getBoundingClientRect();
        const mapRect = document.querySelector('.map-container').getBoundingClientRect();

        const title = icon.getAttribute('data-title');
        const desc = icon.getAttribute('data-desc');
        const img = icon.getAttribute('data-img');
        const sound = icon.getAttribute('data-sound');

        // T·∫Øt √¢m c≈©
        if (currentAudio) currentAudio.pause();

        // Ph√°t √¢m m·ªõi
        currentAudio = new Audio(sound);
        currentAudio.play();

        // G·∫Øn n·ªôi dung popup
        infoBox.innerHTML = `
          <img src="${img}" alt="${title}">
          <strong>${title}</strong>
          <p>${desc}</p>
        `;
        infoBox.style.display = 'block';

        // T√≠nh v·ªã tr√≠ popup
        const boxWidth = 300;
        const leftSpace = rect.left - mapRect.left;
        const rightSpace = mapRect.right - rect.right;

        if (rightSpace > boxWidth) {
          infoBox.className = 'info-box right';
          infoBox.style.left = (rect.right - mapRect.left + 10) + 'px';
        } else {
          infoBox.className = 'info-box left';
          infoBox.style.left = (rect.left - mapRect.left - boxWidth - 10) + 'px';
        }

        infoBox.style.top = (rect.top - mapRect.top - 10) + 'px';
      });
    });

    // T·∫Øt popup khi b·∫•m ngo√†i
    document.addEventListener('click', (e) => {
      if (!e.target.classList.contains('icon')) {
        infoBox.style.display = 'none';
        if (currentAudio) currentAudio.pause();
      }
    });
  </script>
</body>
</html>